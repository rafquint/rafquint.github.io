<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Helpers ‚Äî Cat√°logo</title>

  <!-- Bootstrap 5 -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
    rel="stylesheet"
    integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH"
    crossorigin="anonymous"
  />
  <!-- Bootstrap Icons (opcional) -->
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css"
    rel="stylesheet"
  />
  <!-- Vue 3 (global build) -->
  <script src="https://unpkg.com/vue@3.5.12/dist/vue.global.prod.js" defer></script>

  <style>
    body { background:#0b1220; }
    .brand-grad {
      background: radial-gradient(1200px 600px at 10% 0%, #15213a 0%, transparent 60%),
                  radial-gradient(1200px 600px at 90% 0%, #13223a 0%, transparent 60%),
                  radial-gradient(1400px 800px at 50% 120%, #0f1a2d 0%, transparent 60%);
    }
    .card { border:1px solid rgba(255,255,255,.08); background:rgba(255,255,255,.02); }
    .card:hover { transform: translateY(-2px); transition: transform .2s ease; }
    .text-muted-2 { color: rgba(255,255,255,.6)!important; }
    .text-hero { color:#dbe7ff; }
    .chip { background: rgba(255,255,255,.08); color:#dbe7ff; border-radius:999px; padding:.15rem .6rem; font-size:.8rem; }
    .form-control, .form-select { background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.15); color:#eaf0ff; }
    .form-control::placeholder { color: rgba(255,255,255,.5); }
    .link-light-soft { color:#eaf0ff; text-decoration:none; }
    .link-light-soft:hover { color:#fff; text-decoration:underline; }
    .footer { color: rgba(255,255,255,.55); }
  </style>
</head>
<body class="brand-grad text-light">
<div id="app">
  <!-- Header -->
  <header class="container py-4">
    <div class="d-flex align-items-center justify-content-between flex-wrap gap-3">
      <div>
        <h1 class="h3 text-hero mb-1">
          <i class="bi bi-card-checklist me-2"></i> Cat√°logo de Helpers
        </h1>
        <div class="text-muted-2">P√°ginas est√°ticas no diret√≥rio <code>/helpers</code>.</div>
      </div>
      <div class="d-flex align-items-center gap-2">
        <a class="btn btn-sm btn-outline-light" target="_blank"
           href="https://github.com/rafquint/rafquint.github.io/tree/main/helpers">
          <i class="bi bi-github me-1"></i> Ver no GitHub
        </a>
        <a class="btn btn-sm btn-primary" href="../">
          <i class="bi bi-house-door me-1"></i> Ir para raiz
        </a>
      </div>
    </div>
  </header>

  <!-- Filtros -->
  <section class="container pb-3">
    <div class="row g-3">
      <div class="col-12 col-md-6">
        <label class="form-label mb-1">Buscar</label>
        <input type="search" class="form-control" v-model.trim="q" placeholder="Digite parte do nome‚Ä¶ (ex.: hex, imagem)" />
      </div>
      <div class="col-6 col-md-3">
        <label class="form-label mb-1">Ordenar por</label>
        <select class="form-select" v-model="sortBy">
          <option value="name">Nome (A‚ÜíZ)</option>
          <option value="nameDesc">Nome (Z‚ÜíA)</option>
        </select>
      </div>
      <div class="col-6 col-md-3">
        <label class="form-label mb-1">Exibir</label>
        <select class="form-select" v-model.number="pageSize">
          <option :value="12">12 por p√°gina</option>
          <option :value="24">24 por p√°gina</option>
          <option :value="48">48 por p√°gina</option>
          <option :value="9999">Tudo</option>
        </select>
      </div>
    </div>
  </section>

  <!-- Lista -->
  <main class="container pb-5">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <div class="text-muted-2">
        <strong>{{ filtered.length }}</strong> item(ns) listado(s)
      </div>
      <div class="d-none d-md-block">
        <span class="chip me-1" v-for="tag in topTags" :key="tag" @click="toggleTag(tag)" role="button">
          <i class="bi bi-tag me-1"></i>{{ tag }}
        </span>
      </div>
    </div>

    <div class="row g-3">
      <div class="col-12 col-sm-6 col-lg-4 col-xxl-3" v-for="file in paginated" :key="file.path">
        <div class="card h-100">
          <div class="card-body d-flex flex-column">
            <div class="d-flex align-items-start justify-content-between">
              <h2 class="h6 mb-2">
                <a class="link-light-soft" :href="file.href" :title="file.name">
                  <i class="bi bi-filetype-html me-1"></i>{{ displayName(file.name) }}
                </a>
              </h2>
              <span class="badge bg-secondary">HTML</span>
            </div>
            <p class="text-muted-2 small mb-3">{{ file.desc || describe(file.name) }}</p>
            <div class="mt-auto d-flex align-items-center gap-2">
              <a class="btn btn-sm btn-outline-light" :href="file.href">
                <i class="bi bi-box-arrow-up-right me-1"></i>Abrir
              </a>
              <a class="btn btn-sm btn-outline-light" target="_blank" :href="toGitHub(file.path)">
                <i class="bi bi-github me-1"></i>GitHub
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- vazio -->
      <div v-if="filtered.length === 0" class="col-12">
        <div class="text-center py-5 text-muted-2">
          <i class="bi bi-emoji-frown display-5 d-block mb-3"></i>
          Nenhum helper encontrado para a busca/filtros atuais.
        </div>
      </div>
    </div>

    <!-- Pagina√ß√£o -->
    <div class="d-flex justify-content-center gap-2 mt-4" v-if="pages > 1">
      <button class="btn btn-outline-light btn-sm" :disabled="page===1" @click="page--">
        <i class="bi bi-chevron-left"></i>
      </button>
      <span class="chip">P√°gina {{ page }} / {{ pages }}</span>
      <button class="btn btn-outline-light btn-sm" :disabled="page===pages" @click="page++">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </main>

  <!-- Rodap√© -->
  <footer class="container pb-4 footer small">
    <div class="d-flex flex-wrap justify-content-between">
      <div>¬© {{ new Date().getFullYear() }} ‚Äî Helpers</div>
      <div>Cat√°logo est√°tico (sem chamadas √† API).</div>
    </div>
  </footer>
</div>

<!-- Bootstrap JS -->
<script
  src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
  crossorigin="anonymous"
  defer></script>

<script>
window.addEventListener('DOMContentLoaded', () => {
  const { createApp, computed, ref } = Vue;

  createApp({
    setup() {
      const owner  = 'rafquint';
      const repo   = 'rafquint.github.io';
      const branch = 'main';
      const basePath = 'helpers'; // este index.html est√° em /helpers

      // üîí LISTA EST√ÅTICA ‚Äî edite aqui para adicionar/remover helpers
      const helpers = ref([
        {
          name: 'conversor_imagem_para_hex.html',
          path: `${basePath}/conversor_imagem_para_hex.html`,
          href: './conversor_imagem_para_hex.html',
          desc: 'Converte imagens para representa√ß√£o hexadecimal (hex).'
        },
        {
          name: 'visualizador_imagem_hex.html',
          path: `${basePath}/visualizador_imagem_hex.html`,
          href: './visualizador_imagem_hex.html',
          desc: 'Renderiza/visualiza imagem a partir de conte√∫do hexadecimal.'
        }
        // { name: 'meu_novo_helper.html', path: 'helpers/meu_novo_helper.html', href: './meu_novo_helper.html', desc: 'Descri√ß√£o opcional.' }
      ]);

      const q = ref('');
      const sortBy = ref('name');
      const pageSize = ref(24);
      const page = ref(1);
      const selectedTags = ref(new Set());

      // "tags" derivadas do nome do arquivo
      function extractTags(name) {
        return name
          .replace(/\.html?$/i, '')
          .split(/[-_.\s]+/)
          .filter(w => w.length >= 3)
          .map(w => w.toLowerCase());
      }

      const allTags = computed(() => {
        const set = new Set();
        helpers.value.forEach(f => extractTags(f.name).forEach(t => set.add(t)));
        return Array.from(set).sort();
      });
      const topTags = computed(() => allTags.value.slice(0, 10));
      function toggleTag(tag) {
        if (selectedTags.value.has(tag)) selectedTags.value.delete(tag);
        else selectedTags.value.add(tag);
        page.value = 1;
      }

      const filtered = computed(() => {
        let arr = helpers.value.slice();

        // busca
        const term = q.value.trim().toLowerCase();
        if (term) {
          arr = arr.filter(f =>
            f.name.toLowerCase().includes(term) ||
            (f.desc || '').toLowerCase().includes(term)
          );
        }

        // filtro por tags
        if (selectedTags.value.size > 0) {
          arr = arr.filter(f => {
            const tags = new Set(extractTags(f.name));
            for (const t of selectedTags.value) if (!tags.has(t)) return false;
            return true;
          });
        }

        // ordena√ß√£o
        switch (sortBy.value) {
          case 'nameDesc': arr.sort((a,b)=>a.name.localeCompare(b.name)*-1); break;
          default: arr.sort((a,b)=>a.name.localeCompare(b.name));
        }

        return arr;
      });

      const pages = computed(() => Math.max(1, Math.ceil(filtered.value.length / pageSize.value)));
      const paginated = computed(() => {
        const start = (page.value - 1) * pageSize.value;
        return filtered.value.slice(start, start + pageSize.value);
      });

      function displayName(name) {
        return name
          .replace(/\.html?$/i, '')
          .replace(/[-_.]+/g, ' ')
          .replace(/\b\w/g, c => c.toUpperCase());
      }

      function describe(name) {
        const base = displayName(name);
        return `P√°gina auxiliar: ${base}`;
      }

      function toGitHub(filePath) {
        return `https://github.com/${owner}/${repo}/blob/${branch}/${filePath}`;
      }

      return {
        q, sortBy, pageSize, page, pages,
        filtered, paginated, topTags, toggleTag,
        displayName, describe, toGitHub
      };
    }
  }).mount('#app');
});
</script>
</body>
</html>
